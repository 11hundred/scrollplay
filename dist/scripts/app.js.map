{"version":3,"sources":["main.js"],"names":["setTimeline","data","$","html","user","username","title","css","Math","round","duration","magnitude","remove","get","host","id","client_id","sort","a","b","parseFloat","timestamp","lastHeight","lastCommentTop","i","length","thisTop","userAvatar","avatar_url","replace","append","body","last","outerHeight","updateProgress","givenposition","newposition","track","currentTime","percentComplete","activeTrackDuration","window","height","container","animate","scrollTop","setPosition","seek","setArtwork","artwork_url","tempArtwork","loadTrack","trackID","isHistory","toggleClass","addClass","playingElements","removeClass","SC","stream","then","player","history","pushState","permalink","document","play","on","fail","error","trigger","loadTrackFromURL","url","regexTrack","RegExp","exec","lastFMArtistSearch","ajax","dataType","lastFMAPIKey","done","results","artistmatches","artist","getArtistEvents","name","lastFMArtistName","encodeURI","events","event","tempItems","tempDate","Date","startDate","getDate","monthNames","getMonth","venue","location","city","country","empty","find","ready","initialize","redirect_uri","hash","click","this","hasClass","pause","e","pageX","width","focus","bind","searchQuery","val","q","tracks","searchResultsHTML","streamable","promise","console","log","message","fn","drags","opt","extend","handle","cursor","$el","$drag","parent","z_idx","drg_h","drg_w","outerWidth","pos_y","offset","top","pageY","pos_x","left","parents","finalX","finalY","windowWidth","position","preventDefault","originalEvent","detail","wheelDelta"],"mappings":"AAUA,QAAAA,aAAAC,GAEAC,EAAA,gBAAAC,KAAAF,EAAAG,KAAAC,SAAA,aAAAJ,EAAAK,MAAA,KACAJ,EAAA,kBAAAK,IAAA,SAAAC,KAAAC,MAAAR,EAAAS,SAAAC,YACAT,EAAA,2BAAAU,SACAV,EAAAW,IAAAC,KAAA,WAAAb,EAAAc,GAAA,uBAAAC,UAAA,SAAAf,GACAA,EAAAgB,KAAA,SAAAC,EAAAC,GAAA,MAAAC,YAAAF,EAAAG,WAAAD,WAAAD,EAAAE,YAGA,KAAA,GADAC,GADAC,EAAA,EAEAC,EAAA,EAAAA,EAAAvB,EAAAwB,OAAAD,IAAA,CACA,GAAAE,GAAAlB,KAAAC,MAAAR,EAAAuB,GAAAH,UAAAV,UACAY,GAAAD,EAAAI,IACAA,EAAAH,EAAAD,EAEA,IAAAK,GAAA1B,EAAAuB,GAAApB,KAAAwB,UACAD,GAAAA,EAAAE,QAAA,aAAA,cACA3B,EAAA,kBAAA4B,OAAA,oBAAA7B,EAAAuB,GAAAT,GAAA,iCAAAW,EAAA,iCAAAC,EAAA,gCAAA1B,EAAAuB,GAAApB,KAAAC,SAAA,KAAAJ,EAAAuB,GAAAO,KAAA,iBACAT,EAAApB,EAAA,2BAAA8B,OAAAC,cACAV,EAAAG,KAKA,QAAAQ,gBAAAC,GAEA,GAAAC,EAEAA,GADAD,GAAA,EACAA,EAEAE,MAAAC,aAGA,IAAAC,GAAAH,EAAAI,mBAEAtC,GAAA,iBAAAK,IAAA,QAAA,IAAAgC,EAAA,KACArC,EAAA,sBAAAK,IAAA,MAAAC,KAAAC,MAAA8B,EAAArC,EAAAuC,QAAAC,UAAA,MAEAC,UAAAC,SACAC,UAAAN,EAAArC,EAAA,kBAAA+B,eACA,GAGA,QAAAa,aAAAV,GACAC,MAAAU,KAAAX,GACAF,eAAAE,GAGA,QAAAY,YAAA/C,GACA,GAAAA,EAAAgD,YAAA,CACA,GAAAC,GAAAjD,EAAAgD,WACAC,GAAAA,EAAArB,QAAA,aAAA,iBACA3B,EAAA,kBAAAK,IAAA,mBAAA,OAAA2C,EAAA,MAIA,QAAAC,WAAAC,EAAAC,GAMAnD,EAAA,gBAAAoD,YAAA,QACApD,EAAA,mBAAAqD,SAAA,WAEArD,EAAA,gCAAAC,OACAqD,gBAAAC,YAAA,QAEAC,GAAAC,OAAA,WAAAP,GAAAQ,KAAA,SAAAC,GAEAxB,MAAAwB,EACA3D,EAAAW,IAAAC,KAAA,WAAAsC,EAAA,cAAApC,UAAA,SAAAf,GACAC,EAAA,QAAAqD,SAAA,eACAF,GACAS,QAAAC,UAAA,GAAA,WAAA9D,EAAAc,GAAA,MAAAd,EAAAc,GAAA,IAAAd,EAAA+D,WAEAC,SAAA3D,MAAAL,EAAAK,MAAA,gBACA0C,WAAA/C,GACAD,YAAAC,GACAuC,oBAAAvC,EAAAS,SACAmD,EAAAK,OACAL,EAAAM,GAAA,OAAA,WACAjC,mBAEA2B,EAAAM,GAAA,SAAA,WACAjE,EAAA,mBAAAoD,YAAA,aAEApD,EAAA,mBAAAuD,YAAA,eACAW,KAAA,SAAAC,GACAb,gBAAAD,SAAA,QACArD,EAAA,kBAAAoE,QAAA,SACApE,EAAA,mBAAAqD,SAAA,UAAApD,KAAA,sCAKA,QAAAoE,kBAAAC,EAAAnB,GACA,GAAAoB,GAAA,GAAAC,QAAA,eACA,OAAAD,GAAAE,KAAAH,IACArB,UAAAsB,EAAAE,KAAAH,GAAA,GAAAnB,IACA,IAEA,EAIA,QAAAuB,oBAAAvE,GACAH,EAAA2E,MACAC,SAAA,OACAN,IAAA,kEAAAO,aAAA,+BAAA1E,IACA2E,KAAA,SAAA/E,GACAA,EAAAgF,QAAAC,cAAAC,QACAC,gBAAAnF,EAAAgF,QAAAC,cAAAC,OAAAE,QAKA,QAAAD,iBAAAE,GACApF,EAAA2E,MACAC,SAAA,OACAN,IAAA,qEAAAO,aAAA,6CAAAQ,UAAAD,KACAN,KAAA,SAAA/E,GACA,GAAAA,EAAAuF,OAAAC,OAAAxF,EAAAuF,OAAAC,MAAAhE,OAAA,EAAA,CACAvB,EAAA,gBAAAqD,SAAA,OAEA,KAAA,GADAmC,GAAA,GACAlE,EAAA,EAAAA,EAAAvB,EAAAuF,OAAAC,MAAAhE,OAAAD,IAAA,CACA,GAAAmE,GAAA,GAAAC,MAAA3F,EAAAuF,OAAAC,MAAAjE,GAAAqE,UACAH,IAAA,OACAA,GAAA,+BAAAzF,EAAAuF,OAAAC,MAAAjE,GAAAgD,IAAA,KACAkB,GAAA,8BACAA,GAAA,8DAAAC,EAAAG,UAAA,6DACAJ,GAAA,4BAAAK,WAAAJ,EAAAK,YAAA,SACAN,GAAA,SACAA,GAAA,+BACAzF,EAAAuF,OAAAC,MAAAjE,GAAAlB,OAAAgF,IACAI,GAAAzF,EAAAuF,OAAAC,MAAAjE,GAAAlB,MAAA,OAEAoF,GAAAzF,EAAAuF,OAAAC,MAAAjE,GAAAyE,MAAAC,SAAAC,KAAA,KAAAlG,EAAAuF,OAAAC,MAAAjE,GAAAyE,MAAAC,SAAAE,QACAV,GAAA,SACAA,GAAA,OACAA,GAAA,QAEAxF,EAAA,mBAAAmG,QAAAvE,OAAA4D,OAEAxF,GAAA,gBAAAuD,YAAA,QAAA6C,KAAA,MAAAD,UAzJA,GAAArF,WAAA,mCACA+D,aAAA,mCACAjE,KAAA,6BACAH,UAAA,GACAgC,UAAAzC,EAAA,YACAmC,MAAAqB,GACAlB,oBAAA,EACAgB,gBAAAtD,EAAA,gDACA6F,YAAA,MAAA,MAAA,MAAA,MAAA,MAAA,MAAA,MAAA,OAAA,MAAA,MAAA,MAAA,MAsJA7F,GAAA+D,UAAAsC,MAAA,WAEA7C,GAAA8C,YACAxF,UAAAA,UACAyF,aAAA,yBAGAhE,OAAAyD,SAAAQ,MACAnC,iBAAA9B,OAAAyD,SAAAQ,MAGAxG,EAAA,mBAAAyG,MAAA,WACAtE,MAAAC,eAAAE,oBACAW,YACAjD,EAAA0G,MAAAC,SAAA,WACAxE,MAAAyE,QAEAzE,MAAA6B,OAEAhE,EAAA0G,MAAAtD,YAAA,aAGApD,EAAA,oBAAAyG,MAAA,WACAzG,EAAA,QAAAoD,YAAA,oBAGApD,EAAA,iBAAAyG,MAAA,SAAAI,GACAjE,YAAAiE,EAAAC,MAAA9G,EAAAuC,QAAAwE,QAAAzE,uBAGAtC,EAAA,kBAAAyG,MAAA,WACAzG,EAAA,gBAAAoD,YAAA,QACApD,EAAA,iBAAAgH,UAGAhH,EAAA,iBAAAiH,KAAA,gDAAA,WACA,GAAAC,GAAAlH,EAAA0G,MAAAS,KACA,KAAAD,EAAA3F,QACAvB,EAAA,mBAAAC,KAAA,IACAD,EAAA,mBAAAuD,YAAA,WACA2D,EAAA3F,OAAA,GACAiC,GAAA7C,IAAA,WACAyG,EAAAF,IACAxD,KAAA,SAAA2D,GACA,GAAAC,GAAA,EACA,IAAAD,EAAA9F,QAAA,EACA+F,EAAA,uBAEA,KAAA,GAAAhG,GAAA,EAAA,EAAAA,IACA+F,EAAA/F,GAAAiG,cAAA,IACAD,GAAA,2CAAAD,EAAA/F,GAAAT,GAAA,KACAwG,EAAA/F,GAAAyB,cACAuE,GAAA,aAAAD,EAAA/F,GAAAyB,YAAA,MAEAuE,GAAA,6CAAAD,EAAA/F,GAAAlB,MAAA,qCAAAiH,EAAA/F,GAAApB,KAAAC,SAAA,sBAEAmB,GAAA+F,EAAA9F,OAAA,GARAD,KAaAtB,EAAA,mBAAAqD,SAAA,UACArD,EAAA,mBAAAC,KAAAqH,GAAAE,UAAA1C,KAAA,WACA9E,EAAA,iBAAAyG,MAAA,WACAxD,UAAAjD,EAAA0G,MAAA3G,KAAA,kBAvBAyD,SA0BA,SAAAW,GACAsD,QAAAC,IAAA,UAAAvD,EAAAwD,aAKA3H,EAAA4H,GAAAC,MAAA,SAAAC,GACAA,EAAA9H,EAAA+H,QACAC,OAAA,GACAC,OAAA,QACAH,EAEA,IAAAI,EAQA,OALAA,GADA,KAAAJ,EAAAE,OACAtB,KAEAA,KAAAN,KAAA0B,EAAAE,QAGAE,EAAA7H,IAAA,SAAAyH,EAAAG,QAAAhE,GAAA,YAAA,SAAA4C,GACA,GAAAsB,EACAnI,GAAA0G,MAAArD,SAAA,cAEA8E,EADA,KAAAL,EAAAE,OACAhI,EAAA0G,MAAArD,SAAA,aAEArD,EAAA0G,MAAArD,SAAA,iBAAA+E,SAAA/E,SAAA,YAEA,IAAAgF,GAAAF,EAAA9H,IAAA,WACAiI,EAAAH,EAAApG,cACAwG,EAAAJ,EAAAK,aACAC,EAAAN,EAAAO,SAAAC,IAAAL,EAAAzB,EAAA+B,MACAC,EAAAV,EAAAO,SAAAI,KAAAP,EAAA1B,EAAAC,KACAqB,GAAA9H,IAAA,UAAA,KAAA0I,UAAA9E,GAAA,YAAA,SAAA4C,GACA,GAAAmC,GACAC,EACAC,EAAAlJ,EAAAuC,QAAAwE,OACA/G,GAAAuC,QAAAC,QAEAwG,GADAnC,EAAAC,MAAA+B,EAAAK,EACAA,EAAAX,EACAJ,EAAAgB,WAAAL,KAAA,EACA,EAEAjC,EAAAC,MAAA+B,EAAAN,EAGAU,EADAd,EAAAgB,WAAAR,IAAA,EACA,EAEA9B,EAAA+B,MAAAH,EAAAH,EAEAtI,EAAA,cAAA0I,QACAC,IAAAM,EACAH,KAAAE,IACA/E,GAAA,UAAA,WACAjE,EAAA0G,MAAAnD,YAAA,aAAAlD,IAAA,UAAAgI,OAGAxB,EAAAuC,mBACAnF,GAAA,UAAA,WACA,KAAA6D,EAAAE,OACAhI,EAAA0G,MAAAnD,YAAA,aAEAvD,EAAA0G,MAAAnD,YAAA,iBAAA6E,SAAA7E,YAAA,gBAMAvD,EAAA,UAAA6H,UAIA7H,EAAAuC,QAAA0B,GAAA,WAAA,SAAA4C,GACAxC,iBAAA9B,OAAAyD,SAAAQ,MAAA,GACAxG,EAAA,gBAAAqD,SAAA,UAGArD,EAAA,QAAAiE,GAAA,4BAAA,SAAA4C,GAQA,MAPA7G,GAAA,QAAA2G,SAAA,gBAEA/D,YADAiE,EAAAwC,cAAAC,OAAA,GAAAzC,EAAAwC,cAAAE,WAAA,EACApH,MAAAC,cAAA,IAEAD,MAAAC,cAAA,MAGA","file":"app.js","sourcesContent":["var client_id = '9994e3c432c77379bee441c98b1a4082';\nvar lastFMAPIKey = '70eb62503565b422507f84fbf689cb18';\nvar host = 'https://api.soundcloud.com';\nvar magnitude = 0.10;\nvar container = $('.wrapper');\nvar track, SC;\nvar activeTrackDuration = 0;\nvar playingElements = $('.progress-bar, .controls, .comments-progress');\nvar monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Augt', 'Sep', 'Oct', 'Nov', 'Dec'];\n\nfunction setTimeline(data) {\n  //lastFMArtistSearch(data.user.username);\n  $('.track-title').html(data.user.username + ' &mdash; \"' + data.title + '\"');\n  $('.comments-list').css('height', Math.round(data.duration * magnitude));\n  $('.comments-list .comment').remove();\n  $.get(host + '/tracks/' + data.id + '/comments?client_id=' + client_id, function(data) {\n    data.sort(function(a,b) { return parseFloat(a.timestamp) - parseFloat(b.timestamp); } );\n    var lastCommentTop = 0;\n    var lastHeight;\n    for (var i = 0; i < data.length; i++) {\n      var thisTop = Math.round(data[i].timestamp * magnitude);\n      if (thisTop < lastCommentTop + lastHeight) {\n        thisTop = lastCommentTop + lastHeight;\n      }\n      var userAvatar = data[i].user.avatar_url;\n      userAvatar = userAvatar.replace('-large.jpg', '-badge.jpg');\n      $('.comments-list').append('<div id=\"comment-' + data[i].id + '\" class=\"comment\" style=\"top: ' + thisTop + 'px;\"><img class=\"avatar\" src=\"' + userAvatar + '\"><span class=\"comment-text\">' + data[i].user.username + ': ' + data[i].body + '</span></div>');\n      lastHeight = $('.comments-list .comment').last().outerHeight();\n      lastCommentTop = thisTop;\n    }\n  });\n}\n\nfunction updateProgress(givenposition) {\n\n  var newposition;\n  if (givenposition >= 0) {\n    newposition = givenposition;\n  } else {\n    newposition = track.currentTime();\n  }\n\n  var percentComplete = newposition / activeTrackDuration;\n\n  $('.bar-progress').css('width', percentComplete * 100 + '%');\n  $('.comments-progress').css('top', Math.round(percentComplete * $(window).height()) + 'px');\n\n  container.animate({\n    scrollTop: percentComplete * $('.comments-list').outerHeight()\n  }, 0);\n}\n\nfunction setPosition(newposition) {\n  track.seek(newposition);\n  updateProgress(newposition);\n}\n\nfunction setArtwork(data) {\n  if (data.artwork_url) {\n    var tempArtwork = data.artwork_url;\n    tempArtwork = tempArtwork.replace('-large.jpg', '-t500x500.jpg');\n    $('.image-bg-wrap').css('background-image', 'url(' + tempArtwork + ')');\n  }\n}\n\nfunction loadTrack(trackID, isHistory) {\n\n  /*if (track) {\n    track.destruct();\n  }*/\n\n  $('.search-wrap').toggleClass('hide');\n  $('.status-control').addClass('playing');\n\n  $('.track-title, .comments-list').html();\n  playingElements.removeClass('hide');\n\n  SC.stream('/tracks/' + trackID).then(function(player) {\n\n    track = player;\n    $.get(host + '/tracks/' + trackID + '?client_id=' + client_id, function(data) {\n      $('body').addClass('trackloaded');\n      if (!isHistory) {\n        history.pushState('', 'New ID: ' + data.id, '/#/' + data.id + '/' + data.permalink);\n      }\n      document.title = data.title + ' | ScrollPlay';\n      setArtwork(data);\n      setTimeline(data);\n      activeTrackDuration = data.duration;\n      player.play();\n      player.on('time', function() {\n        updateProgress();\n      });\n      player.on('finish', function() {\n        $('.status-control').toggleClass('playing');\n      });\n      $('.header-top-row').removeClass('collapsed');\n    }).fail(function(error) {\n      playingElements.addClass('hide');\n      $('.search-toggle').trigger('click');\n      $('.search-results').addClass('filled').html('Track not found. Search again.');\n    });\n  });\n}\n\nfunction loadTrackFromURL(url, isHistory) {\n  var regexTrack = new RegExp('(#)\\/([0-9]+)');\n  if (regexTrack.exec(url)) {\n    loadTrack(regexTrack.exec(url)[2], isHistory);\n    return true;\n  } else {\n    return false;\n  }\n}\n\nfunction lastFMArtistSearch(username) {\n  $.ajax({\n    dataType: 'json',\n    url: 'http://ws.audioscrobbler.com/2.0/?method=artist.search&api_key=' + lastFMAPIKey + '&format=json&limit=1&artist=' + username\n  }).done(function(data) {\n    if (data.results.artistmatches.artist) {\n      getArtistEvents(data.results.artistmatches.artist.name);\n    }\n  });\n}\n\nfunction getArtistEvents(lastFMArtistName) {\n  $.ajax({\n    dataType: 'json',\n    url: 'http://ws.audioscrobbler.com/2.0/?method=artist.getevents&api_key=' + lastFMAPIKey + '&format=json&limit=3&autocorrect=1&artist=' + encodeURI(lastFMArtistName)\n  }).done(function(data) {\n    if (data.events.event && data.events.event.length > 0) {\n      $('.events-list').addClass('show');\n      var tempItems = '';\n      for (var i = 0; i < data.events.event.length; i++) {\n        var tempDate = new Date(data.events.event[i].startDate);\n        tempItems += '<li>';\n          tempItems += '<a class=\"event-link\" href=\"' + data.events.event[i].url + '\">';\n          tempItems += '<div class=\"cal-icon-wrap\">';\n            tempItems += '<span class=\"fa-stack\"><span class=\"fa-stack-1x date-text\">' + tempDate.getDate() + '</span><i class=\"fa fa-calendar-o fa-stack-2x\"></i></span>';\n            tempItems += '<div class=\"month-title\">' + monthNames[tempDate.getMonth()] + '</div>';\n          tempItems += '</div>';\n          tempItems += '<div class=\"event-location\">';\n            if (data.events.event[i].title != lastFMArtistName) {\n              tempItems += data.events.event[i].title + ' - ';\n            }\n            tempItems += data.events.event[i].venue.location.city + ', ' + data.events.event[i].venue.location.country;\n          tempItems += '</div>';\n          tempItems += '</a>';\n        tempItems += '</li>';\n      }\n      $('.events-list ul').empty().append(tempItems);\n    } else {\n      $('.events-list').removeClass('show').find('ul').empty();\n    }\n  });\n}\n\n$(document).ready(function() {\n\n  SC.initialize({\n    client_id: client_id,\n    redirect_uri: 'http://scrollplay.co'\n  });\n\n  if (window.location.hash) {\n    loadTrackFromURL(window.location.hash);\n  }\n\n  $('.status-control').click(function() {\n    if (track.currentTime() >= activeTrackDuration) {\n      loadTrack();\n    } else if ($(this).hasClass('playing')) {\n      track.pause();\n    } else {\n      track.play();\n    }\n    $(this).toggleClass('playing');\n  });\n\n  $('.comments-toggle').click(function() {\n    $('body').toggleClass('comments-shown');\n  });\n\n  $('.progress-bar').click(function(e) {\n    setPosition((e.pageX / $(window).width()) * activeTrackDuration);\n  });\n\n  $('.search-toggle').click(function() {\n    $('.search-wrap').toggleClass('hide');\n    $('#search-input').focus();\n  });\n\n  $('#search-input').bind('propertychange change click keyup input paste', function() {\n    var searchQuery = $(this).val();\n    if (searchQuery.length === 0) {\n      $('.search-results').html('');\n      $('.search-results').removeClass('filled');\n    } else if (searchQuery.length > 2) {\n      SC.get('/tracks', {\n        q: searchQuery\n      }).then(function(tracks) {\n        var searchResultsHTML = '';\n        if (tracks.length <= 1) {\n          searchResultsHTML = 'No tracks found.';\n        } else {\n          for (var i = 0; i < 5; i++) {\n            if (tracks[i].streamable === true) {\n              searchResultsHTML += '<div class=\"search-track\" data-trackid=\"' + tracks[i].id + '\">';\n              if (tracks[i].artwork_url) {\n                searchResultsHTML += '<img src=\"' + tracks[i].artwork_url + '\">';\n              }\n              searchResultsHTML += '<div class=\"meta\"><div class=\"meta-title\">' + tracks[i].title + '</div><div class=\"meta-artist\">by ' + tracks[i].user.username + '</div></div></div>';\n            }\n            if (i == tracks.length - 1) {\n              break;\n            }\n          }\n        }\n        $('.search-results').addClass('filled');\n        $('.search-results').html(searchResultsHTML).promise().done(function() {\n          $('.search-track').click(function() {\n            loadTrack($(this).data('trackid'));\n          });\n        });\n      }).catch(function(error) {\n        console.log('Error: ' + error.message);\n      });\n    }\n  });\n\n  $.fn.drags = function(opt) {\n  \topt = $.extend({\n  \t\thandle: '',\n  \t\tcursor: 'move'\n  \t}, opt);\n\n    var $el;\n\n  \tif (opt.handle === '') {\n      $el = this;\n  \t} else {\n      $el = this.find(opt.handle);\n  \t}\n\n  \treturn $el.css('cursor', opt.cursor).on('mousedown', function(e) {\n      var $drag;\n      $(this).addClass('hasDragged');\n  \t\tif (opt.handle === '') {\n        $drag = $(this).addClass('draggable');\n  \t\t} else {\n        $drag = $(this).addClass('active-handle').parent().addClass('draggable');\n  \t\t}\n  \t\tvar z_idx = $drag.css('z-index'),\n  \t\t\tdrg_h = $drag.outerHeight(),\n  \t\t\tdrg_w = $drag.outerWidth(),\n  \t\t\tpos_y = $drag.offset().top + drg_h - e.pageY,\n  \t\t\tpos_x = $drag.offset().left + drg_w - e.pageX;\n  \t\t$drag.css('z-index', 1000).parents().on('mousemove', function(e) {\n        var finalX;\n        var finalY;\n        var windowWidth = $(window).width();\n        var windowHeight = $(window).height();\n        if (e.pageX + pos_x > windowWidth) {\n          finalX = windowWidth - drg_w;\n        } else if ($drag.position().left < 0) {\n          finalX = 0;\n        } else {\n          finalX = e.pageX + pos_x - drg_w;\n        }\n        if ($drag.position().top < 0) {\n          finalY = 0;\n        } else {\n          finalY = e.pageY + pos_y - drg_h;\n        }\n  \t\t\t$('.draggable').offset({\n  \t\t\t\ttop: finalY,\n  \t\t\t\tleft: finalX\n  \t\t\t}).on('mouseup', function() {\n  \t\t\t\t$(this).removeClass('draggable').css('z-index', z_idx);\n  \t\t\t});\n  \t\t});\n  \t\te.preventDefault();\n  \t}).on('mouseup', function() {\n  \t\tif (opt.handle === '') {\n  \t\t\t$(this).removeClass('draggable');\n  \t\t} else {\n  \t\t\t$(this).removeClass('active-handle').parent().removeClass('draggable');\n  \t\t}\n  \t});\n\n  };\n\n  $('header').drags();\n\n});\n\n$(window).on('popstate', function(e) {\n  loadTrackFromURL(window.location.hash, true);\n  $('.search-wrap').addClass('hide');\n});\n\n$('body').on('DOMMouseScroll mousewheel', function(e) {\n  if ($('body').hasClass('trackloaded')) {\n    if (e.originalEvent.detail > 0 || e.originalEvent.wheelDelta < 0) {\n      setPosition(track.currentTime() + 100);\n    } else {\n      setPosition(track.currentTime() - 100);\n    }\n  }\n  return false;\n});\n"],"sourceRoot":"/source/"}