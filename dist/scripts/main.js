function setTimeline(t){$(".comments-list").css("height",Math.round(t.duration*magnitude)),$.get(host+"/tracks/"+trackID+"/comments?consumer_key="+consumerKey,function(t){t.sort(function(t,a){return parseFloat(t.timestamp)-parseFloat(a.timestamp)});for(var a,o=0,r=0;r<t.length;r++){var e=Math.round(t[r].timestamp*magnitude);o+a>e&&(e=o+a),$(".comments-list").append('<div id="comment-'+t[r].id+'" class="comment" style="top: '+e+'px;"><img class="avatar" src="'+t[r].user.avatar_url+'">'+t[r].user.username+": "+t[r].body+"</div>"),a=$(".comments-list .comment").last().outerHeight(),o=e}})}function updateProgress(t){var a;a=t>=0?t:track.position,$(".bar-progress").css("width",a/track.durationEstimate*100+"%"),$(".comments-progress").css("top",Math.round(a*magnitude)+"px");var o=$(".comments-progress").position().top,r=$(window).height()/2,e=o-r;Math.abs(e)>=0&&container.animate({scrollTop:e},0)}function setArtwork(t){t.artwork_url&&container.css("background-image","url("+t.artwork_url+")")}function loadTrack(){SC.whenStreamingReady(function(){track=SC.stream("/tracks/"+trackID,{autoPlay:!1},function(t){t.play({whileplaying:function(){updateProgress()},onfinish:function(){$(".status-control").toggleClass("playing")}}),$.get(host+"/tracks/"+trackID+"?consumer_key="+consumerKey,function(t){setTimeline(t),setArtwork(t)})})})}var consumerKey="9994e3c432c77379bee441c98b1a4082",host="https://api.soundcloud.com",trackID=165098282,magnitude=.1,container=$(".wrapper"),track,SC;SC.initialize({client_id:consumerKey}),$(document).ready(function(){loadTrack(),$(".status-control").click(function(){track.position>=track.duration?loadTrack():track.togglePause(),$(this).toggleClass("playing")}),$(".progress-bar").click(function(t){var a=t.pageX/$(window).width()*track.durationEstimate;track.setPosition(a),updateProgress(a)})});